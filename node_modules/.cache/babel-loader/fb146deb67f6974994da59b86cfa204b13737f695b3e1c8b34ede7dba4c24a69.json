{"ast":null,"code":"import { Feature } from '../Feature.mjs';\nlet id = 0;\nclass ExitAnimationFeature extends Feature {\n  constructor() {\n    super(...arguments);\n    this.id = id++;\n  }\n  update() {\n    if (!this.node.presenceContext) return;\n    const {\n      isPresent,\n      onExitComplete\n    } = this.node.presenceContext;\n    const {\n      isPresent: prevIsPresent\n    } = this.node.prevPresenceContext || {};\n    if (!this.node.animationState || isPresent === prevIsPresent) {\n      return;\n    }\n    const exitAnimation = this.node.animationState.setActive(\"exit\", !isPresent);\n    if (onExitComplete && !isPresent) {\n      exitAnimation.then(() => {\n        onExitComplete(this.id);\n      });\n    }\n  }\n  mount() {\n    const {\n      register,\n      onExitComplete\n    } = this.node.presenceContext || {};\n    if (onExitComplete) {\n      onExitComplete(this.id);\n    }\n    if (register) {\n      this.unmount = register(this.id);\n    }\n  }\n  unmount() {}\n}\nexport { ExitAnimationFeature };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}